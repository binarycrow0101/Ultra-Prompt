<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Dark Humor Prompt Generator</title>
  <style>
    :root{--bg:#0f1113;--card:#111318;--accent:#c792ea;--muted:#9aa0a6;--glass:rgba(255,255,255,0.03)}
    html,body{height:100%;margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial; background:linear-gradient(180deg,#071018 0%, #081018 60%);color:#e6eef6}
    .wrap{max-width:880px;margin:36px auto;padding:20px}
    header{display:flex;gap:16px;align-items:center}
    h1{margin:0;font-size:20px}
    .card{background:var(--card);border-radius:12px;padding:18px;box-shadow:0 6px 18px rgba(2,6,10,0.6);}
    .controls{display:flex;gap:12px;flex-wrap:wrap;margin-top:14px}
    select,input[type=range]{background:var(--glass);border:1px solid rgba(255,255,255,0.04);color:inherit;padding:8px;border-radius:8px}
    button{background:linear-gradient(90deg,var(--accent),#6bd3ff);border:none;padding:10px 14px;border-radius:10px;color:#041021;font-weight:700;cursor:pointer}
    .prompt{margin-top:18px;padding:18px;border-radius:12px;background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));font-size:18px}
    .meta{display:flex;gap:10px;margin-top:10px;align-items:center}
    .small{font-size:13px;color:var(--muted)}
    .history{margin-top:18px;display:grid;grid-template-columns:1fr 1fr;gap:10px}
    .chip{background:rgba(255,255,255,0.02);padding:8px;border-radius:8px;font-size:13px}
    .footer{margin-top:18px;color:var(--muted);font-size:13px}
    .seed{background:transparent;border:1px dashed rgba(255,255,255,0.03);padding:6px;border-radius:6px}
    .flex{display:flex;gap:8px;align-items:center}
    .big-btn{font-size:16px;padding:12px 18px}
    @media(max-width:600px){.history{grid-template-columns:1fr}}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="card" style="padding:12px 14px;display:flex;align-items:center;gap:12px">
        <svg width="36" height="36" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 2C10 2 4 4 4 10c0 4 3 7 3 7s-.5 3 5 3 6-3 6-3 3-3 3-7c0-6-6-8-9-8z" stroke="white" stroke-opacity="0.9" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/></svg>
        <div>
          <h1>Dark Humor Prompt Generator</h1>
          <div class="small">Generate deadpan, slightly off, delightfully grim prompt seeds for illustration.</div>
        </div>
      </div>
    </header>

    <div class="card" style="margin-top:16px">
      <div style="display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap">
        <div style="flex:1;min-width:220px">
          <label class="small">Primary mood</label><br>
          <select id="mood">
            <option>melancholic</option>
            <option>absurd</option>
            <option>tenderly cruel</option>
            <option>deadpan</option>
            <option>playful macabre</option>
          </select>
        </div>

        <div style="flex:1;min-width:220px">
          <label class="small">Subject</label><br>
          <select id="subject">
            <option>child</option>
            <option>elderly person</option>
            <option>pet</option>
            <option>houseplant</option>
            <option>goblin</option>
            <option>ghost</option>
            <option>object (toaster, lamp)</option>
            <option>worker (mailman, dentist)</option>
          </select>
        </div>

        <div style="flex:1;min-width:180px">
          <label class="small">Twist</label><br>
          <select id="twist">
            <option>ritualized</option>
            <option>mundane decay</option>
            <option>polite violence</option>
            <option>bureaucratic afterlife</option>
            <option>caring cruelty</option>
            <option>absurd literalism</option>
          </select>
        </div>
      </div>

      <div class="controls">
        <div class="flex">
          <label class="small">Weirdness</label>
          <input id="weird" type="range" min="0" max="10" value="6">
        </div>

        <div class="flex">
          <label class="small">Tenderness</label>
          <input id="tender" type="range" min="0" max="10" value="3">
        </div>

        <div style="margin-left:auto;display:flex;gap:8px">
          <button id="gen" class="big-btn">Generate</button>
          <button id="surprise">Surprise</button>
        </div>
      </div>

      <div id="output" class="prompt">Press <strong>Generate</strong> or <strong>Surprise</strong> to make a prompt.</div>

      <div class="meta">
        <div class="small">Seed: <span id="seed" class="seed">—</span></div>
        <div style="margin-left:auto;display:flex;gap:8px">
          <button id="copy">Copy</button>
          <button id="save">Save</button>
          <button id="clear">Clear</button>
        </div>
      </div>

      <div class="history" id="history"></div>

      <div class="footer">Tip: click <strong>Save</strong> to keep favourite seeds — then use them as captions or starting sketches.</div>
    </div>
  </div>

  <script>
    // Word banks
    const actions = [
      'watering the plants', 'making toast', 'folding laundry', 'teaching a class', 'painting a portrait', 'taking a nap', 'polishing trophies', 'arranging flowers', 'writing a will', 'baking cupcakes'
    ];
    const objects = [
      'a skull', 'an old shoe', 'a moth-eaten teddy', 'a jar of whispers', 'a glass eye', 'an eviction notice', 'a single glove', 'a broken music box', 'a faded postcard'
    ];
    const places = [
      'attic', 'bus stop', 'diner at 3am', 'cemetery greenhouse', 'library basement', 'abandoned playground', 'family photo studio'
    ];
    const tones = {
      melancholic: ['softly tragic','lonely yet polite','wearily sincere'],
      absurd: ['ridiculously specific','delightfully wrong','comic and tiny'],
      'tenderly cruel': ['gentle violence','caring but vicious','sympathetic cruelty'],
      deadpan: ['matter-of-fact','blunt and quiet','politely grim'],
      'playful macabre': ['cheeky and dark','sprightly mournful','mischievously bleak']
    };

    const moodEl = document.getElementById('mood');
    const subjectEl = document.getElementById('subject');
    const twistEl = document.getElementById('twist');
    const output = document.getElementById('output');
    const seedEl = document.getElementById('seed');
    const historyEl = document.getElementById('history');

    function rng(seed){
      // simple xorshift32
      let x = seed >>> 0;
      return function(){ x ^= x << 13; x ^= x >>> 17; x ^= x << 5; return (x >>> 0) / 4294967295; }
    }

    function randomFrom(arr, r){ return arr[Math.floor(r()*arr.length)]; }

    function makePrompt(s){
      const r = rng(s);
      const mood = moodEl.value;
      const subject = subjectEl.value;
      const twist = twistEl.value;
      const weird = +document.getElementById('weird').value;
      const tender = +document.getElementById('tender').value;

      const tone = randomFrom(tones[mood], r);
      const action = randomFrom(actions, r);
      const obj = randomFrom(objects, r);
      const place = randomFrom(places, r);

      // Compose
      const lines = [];
      // Lead sentence
      let lead = `A ${subject} ${action} in a ${place}`;

      // If weirdness high, add object twist
      if(weird > 5){
        lead += ` while secretly tending ${obj}`;
      }

      // If tender present, soften
      if(tender > 5){
        lead += ` — they hum to themselves and seem proud.`;
      } else {
        lead += `.`;
      }

      // small flourish depending on twist
      let flourish = '';
      if(twist === 'ritualized') flourish = `There is a small, polite ritual involved: everyone bows to the bread before eating.`;
      if(twist === 'mundane decay') flourish = `Everything smells faintly of old cigarettes and forgotten birthdays.`;
      if(twist === 'polite violence') flourish = `They apologize mid-action as if manners could stop it.`;
      if(twist === 'bureaucratic afterlife') flourish = `Forms must be filled in triplicate — the afterlife insists on paperwork.`;
      if(twist === 'caring cruelty') flourish = `They trim the thorny parts with gentle hands.`;
      if(twist === 'absurd literalism') flourish = `Metaphors are applied literally; the heart literally wears a little wool sweater.`;

      // Combine with tone
      const prompt = `${lead} ${flourish} (${tone})`;
      return prompt;
    }

    function showPrompt(prompt, seed){
      output.textContent = prompt;
      seedEl.textContent = seed;
    }

    function genWithSeed(seed){ const p = makePrompt(seed); showPrompt(p, seed); addHistory(p, seed); }

    function addHistory(text, seed){
      const el = document.createElement('div'); el.className='chip'; el.textContent = text;
      el.title = `Seed: ${seed}`;
      el.onclick = ()=>{ navigator.clipboard && navigator.clipboard.writeText(text); el.style.opacity=0.6; setTimeout(()=>el.style.opacity=1,150); };
      historyEl.prepend(el);
      // keep only last 12
      while(historyEl.children.length>12) historyEl.removeChild(historyEl.lastChild);
    }

    document.getElementById('gen').addEventListener('click', ()=>{
      const seed = Math.floor(Math.random()*4294967295);
      genWithSeed(seed);
    });

    document.getElementById('surprise').addEventListener('click', ()=>{
      // randomize settings then generate
      moodEl.selectedIndex = Math.floor(Math.random()*moodEl.options.length);
      subjectEl.selectedIndex = Math.floor(Math.random()*subjectEl.options.length);
      twistEl.selectedIndex = Math.floor(Math.random()*twistEl.options.length);
      document.getElementById('weird').value = Math.floor(Math.random()*11);
      document.getElementById('tender').value = Math.floor(Math.random()*11);
      const seed = Math.floor(Math.random()*4294967295);
      genWithSeed(seed);
    });

    document.getElementById('copy').addEventListener('click', ()=>{
      const text = output.textContent;
      if(!text) return;
      navigator.clipboard.writeText(text).then(()=>{
        const old = output.textContent; output.textContent = 'Copied! — '+old;
        setTimeout(()=>output.textContent = old,900);
      });
    });

    document.getElementById('save').addEventListener('click', ()=>{
      const text = output.textContent; const seed = seedEl.textContent;
      if(!text || seed==='—') return;
      addHistory(text, seed);
    });

    document.getElementById('clear').addEventListener('click', ()=>{ historyEl.innerHTML=''; });

    // generate an initial sample
    genWithSeed( Date.now() & 0xffffffff );
  </script>
</body>
</html>
